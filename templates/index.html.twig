{% extends 'base.html.twig' %}
{% block body %}
    <div class="hero-header">
        <div id="hero-slider" class="hero-slider">
            {% for news in newsForSlider %}
                <div class="item-slider" style="background:url({{ asset(cms_image_path('homepage.banner' ~ random(1,3))) }});">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-lg-7">
                                <div class="info-slider">
                                    <h1>{{ news.title }}</h1>
                                    <a href="{{ path('app.news.view', {'news': news.id}) }}" class="btn-iw outline">Czytaj więcej <i class="fa fa-long-arrow-right"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <section class="content-info mb-5">
        <div class="dark-home">
           <div class="container">
                <div class="row">
                    <div class="col-xl-9 col-md-12">
                        <ul class="nav nav-tabs" id="myTab">
                           <li><a href="#extraclass" data-toggle="tab" class="active">Ekstraklasa</a></li>
                           <li><a href="#first-league" data-toggle="tab">I liga</a></li>
{#                           <li><a href="#description" data-toggle="tab">DESCRIPTION</a></li>#}
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane active" id="extraclass">
                                <div class="row">
                                   <div class="col-lg-4">
                                       <div class="club-ranking">
                                            <h5><a href="{{ path('app.table.extraclass') }}">Skrócona tabela</a></h5>
                                            <div class="info-ranking">
                                                <ul>
                                                    {% for team in teamsExtraclass %}
                                                        <li>
                                                            <span class="position">
                                                                {{ loop.index }}
                                                            </span>
                                                            <a href="{{ path('app.team.view', {'team': team.id}) }}">
                                                                <img src="{{ team.team.crest.name ? asset('images/team/crest/' ~ team.team.crest.name) : asset('build/img/clubs-logos/pol.png') }}" alt="">
                                                                {{ team.name }}
                                                            </a>
                                                            <span class="points">
                                                                {{ team.points }} pkt
                                                            </span>
                                                        </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                       </div>
                                   </div>
                                   <div class="col-lg-4">
                                       <div class="recent-results">
                                            <h5><a href="{{ path('app.results.extraclass') }}">Ostatnie wyniki</a></h5>
                                            <div class="info-results">
                                                <ul>
                                                    {% for result in resultsExtraclass %}
                                                        <li>
                                                            <span class="head d-flex flex-column align-items-center">
                                                                <small>{{ result.homeTeam.name }} vs. {{ result.awayTeam.name }}  </small>
                                                                <small><span class="teal-color">{{ result.startDate|date('d/m/Y H:i') }}</span></small>

                                                            </span>
                                                            <div class="goals-result">
                                                                <a href="{{ path('app.team.view', {'team': result.homeTeam.id}) }}">
                                                                    <div class="truncate">
                                                                        <img src="{{ result.homeTeam.crest.name ? asset('images/team/crest/' ~ result.homeTeam.crest.name) : asset('build/img/clubs-logos/pol.png') }}" alt="">
                                                                        {{ result.homeTeam.name }}
                                                                    </div>
                                                                </a>
                                                                <span class="goals">
                                                                    <a href="{{ path('app.single_result', {'match': result.id}) }}">
                                                                        <b>{{ result.matchDetails.homeTeamGoals }}</b> - <b>{{ result.matchDetails.awayTeamGoals }}</b>
                                                                    </a>
                                                                </span>
                                                                <a href="{{ path('app.team.view', {'team': result.awayTeam.id}) }}">
                                                                    <div class="truncate">
                                                                        <img src="{{ result.awayTeam.crest.name ? asset('images/team/crest/' ~ result.awayTeam.crest.name) : asset('build/img/clubs-logos/pol.png') }}" alt="">
                                                                        {{ result.awayTeam.name }}
                                                                    </div>
                                                                </a>
                                                            </div>
                                                        </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                       </div>
                                   </div>
                                   <div class="col-lg-4">
                                       <div class="player-ranking">
                                            <h5><a href="#">Najlepsi strzelcy</a></h5>
                                            <div class="info-player">
                                                <ul>
                                                    {% for scorer in bestScorersExtraclass|slice(0,8) %}
                                                        <li>
                                                            <span class="position">
                                                              {{ loop.index }}
                                                            </span>
                                                            <a href="#">
                                                                {{ scorer.name }}
                                                            </a>
                                                            <span class="points">
                                                                {{ scorer.goals }}
                                                            </span>
                                                        </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                       </div>
                                   </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="first-league">
                                <div class="row">
                                    <div class="col-lg-4">
                                        <div class="club-ranking">
                                            <h5><a href="{{ path('app.table.first_league') }}">Skrócona tabela</a></h5>
                                            <div class="info-ranking">
                                                <ul>
                                                    {% for team in teamsFirstLeague %}
                                                        <li>
                                                            <span class="position">
                                                                {{ loop.index }}
                                                            </span>
                                                            <a href="{{ path('app.team.view', {'team': team.id}) }}">
                                                                <img src="{{ team.team.crest.name ? asset('images/team/crest/' ~ team.team.crest.name) : asset('build/img/clubs-logos/pol.png') }}" alt="">
                                                                {{ team.name }}
                                                            </a>
                                                            <span class="points">
                                                                {{ team.points }} pkt
                                                            </span>
                                                        </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="recent-results">
                                            <h5><a href="{{ path('app.results.first_league') }}">Ostatnie wyniki</a></h5>
                                            <div class="info-results">
                                                <ul>
                                                    {% for result in resultsFirstLeague %}
                                                        <li>
                                                            <span class="head d-flex flex-column align-items-center">
                                                                <small>{{ result.homeTeam.name }} vs. {{ result.awayTeam.name }}  </small>
                                                                <small><span class="teal-color">{{ result.startDate|date('d/m/Y H:i') }}</span></small>

                                                            </span>
                                                            <div class="goals-result">
                                                                <a href="{{ path('app.team.view', {'team': result.homeTeam.id}) }}">
                                                                    <div class="truncate">
                                                                        <img src="{{ result.homeTeam.crest.name ? asset('images/team/crest/' ~ result.homeTeam.crest.name) : asset('build/img/clubs-logos/pol.png') }}" alt="">
                                                                        {{ result.homeTeam.name }}
                                                                    </div>
                                                                </a>
                                                                <span class="goals">
                                                                    <a href="{{ path('app.single_result', {'match': result.id}) }}">
                                                                        <b>{{ result.matchDetails.homeTeamGoals }}</b> - <b>{{ result.matchDetails.awayTeamGoals }}</b>
                                                                    </a>
                                                                </span>
                                                                <a href="{{ path('app.team.view', {'team': result.awayTeam.id}) }}">
                                                                    <div class="truncate">
                                                                        <img src="{{ result.awayTeam.crest.name ? asset('images/team/crest/' ~ result.awayTeam.crest.name) : asset('build/img/clubs-logos/pol.png') }}" alt="">
                                                                        {{ result.awayTeam.name }}
                                                                    </div>
                                                                </a>
                                                            </div>
                                                        </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="player-ranking">
                                            <h5><a href="#">Najlepsi strzelcy</a></h5>
                                            <div class="info-player">
                                                <ul>
                                                    {% for scorer in bestScorersFirstLeague|slice(0,8) %}
                                                        <li>
                                                            <span class="position">
                                                              {{ loop.index }}
                                                            </span>
                                                            <a href="#">
                                                                {{ scorer.name }}
                                                            </a>
                                                            <span class="points">
                                                                {{ scorer.goals }}
                                                            </span>
                                                        </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-3 col-md-12">
                        <div class="counter-home-wraper">
                            <div class="title-color text-center">
                                <h4>Ekstraklasa Jesień 2019</h4>
                            </div>
                            {% if nextMatch is not null %}
                                <div class="content-counter content-counter-home" id="start-date" data-date="{{ nextMatch.startDate|date('d M y H:i:s') }}">
                                    <p class="text-center">
                                        <i class="fa fa-clock-o"></i>
                                        Do najblizszego meczu pozostało:
                                    </p>
                                    <div id="event-one" class="counter"></div>
                                    <ul class="post-options">
                                        <li><i class="fa fa-calendar"></i>{{ nextMatch.startDate|date('d/m/Y') }}</li>
                                        <li><i class="fa fa-clock-o"></i>Rozpoczęcie, {{ nextMatch.startDate|date('H:i') }}</li>
                                    </ul>
                                    <div class="list-groups">
                                        <div class="row align-items-center">
                                            <div class="col-md-5">
                                                <img class="counter-team-crest" src="{{ nextMatch.homeTeam.crest.name ? asset('images/team/crest/' ~ nextMatch.homeTeam.crest.name) : asset('build/img/clubs-logos/pol.png') }}" alt="">
                                                <span>{{ nextMatch.homeTeam.name }}</span>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="vs">-</div>
                                            </div>
                                            <div class="col-md-5">
                                                <img class="counter-team-crest" src="{{ nextMatch.awayTeam.crest.name ? asset('images/team/crest/' ~ nextMatch.awayTeam.crest.name) : asset('build/img/clubs-logos/pol.png') }}" alt="">
                                                <span>{{ nextMatch.awayTeam.name }}</span>
                                            </div>
                                            <div class="col-md-12">
                                                Miejsce rozgrywania:
                                                <p>
                                                    <i class="fa fa-globe" aria-hidden="true"></i> <strong>{{ nextMatch.arena ?? 'Brak miejsca rozgrywania meczu' }}</strong>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <a class="btn btn-primary" href="#">
                                        Zapraszamy!
                                        <i class="fa fa-trophy"></i>
                                    </a>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container padding-top">
            <div class="row">
                <div class="col-lg-10 col-xl-10">
                    <div class="panel-box">
                        <div class="titles">
                            <h4>Ostatnie newsy</h4>
                        </div>
                        {% for article in news %}
                            <div class="post-item">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="img-hover">
                                           <img src="{{ article.photo.name is not null ? asset('images/news/' ~ article.photo.name) : asset('build/img/blog/' ~ random(1,4) ~ '.jpg') }}" alt="" class="img-responsive">
                                           <div class="overlay"><a href="{{ path('app.news.view', {'news': article.id}) }}">+</a></div>
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <h4><a href="{{ path('app.news.view', {'news': article.id}) }}">{{ article.title }}</a></h4>
                                        <span class="data-info">{{ article.createdAt|date('d-m-Y, H:i') }}  / <i class="fa fa-comments"></i><a href="#">0</a></span>
                                        {{ article.text|slice(0, 400)|raw }} ...
                                        <a class="teal-color" href="{{ path('app.news.view', {'news': article.id}) }}">Czytaj więcej [+]</a>
                                    </div>
                               </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <aside class="col-sm-6 col-lg-3 col-xl-2">
                    <div class="panel-box">
                        <div class="titles">
                            <h4><i class="fa fa-calendar"></i>Terminarz</h4>
                        </div>
                        <ul class="list-diary">
                            {% for fixture in fixtures %}

                            <li>
                                <h6> {{ fixture.league_name }} <span>{{ fixture.match.startDate|date('d/m/Y H:i') }}</span></h6>
                                <ul class="club-logo">
                                    <li>
                                        <img src="{{ fixture.match.homeTeam.crest.name ? asset('images/team/crest/' ~ fixture.match.homeTeam.crest.name) : asset('build/img/clubs-logos/pol.png') }}" alt="">
                                        <span>{{ fixture.match.homeTeam.name }}</span>
                                    </li>
                                    <li>
                                        <img src="{{ fixture.match.awayTeam.crest.name ? asset('images/team/crest/' ~ fixture.match.awayTeam.crest.name) : asset('build/img/clubs-logos/pol.png') }}" alt="">
                                        <span>{{ fixture.match.awayTeam.name }}</span>
                                    </li>
                                </ul>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </aside>
            </div>
            {% include 'sponsors.html.twig' %}
        </div>
    </section>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('homepage') }}
{% endblock %}
